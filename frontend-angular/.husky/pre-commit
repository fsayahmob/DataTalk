#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” VÃ©rification du code..."

cd frontend-angular

# 1. ESLint
echo "ğŸ“ ESLint..."
npm run lint || {
  echo "âŒ ESLint a trouvÃ© des erreurs. Commit bloquÃ©."
  exit 1
}

# 2. TypeScript
echo "ğŸ“˜ TypeScript..."
npm run typecheck || {
  echo "âŒ Erreurs TypeScript. Commit bloquÃ©."
  exit 1
}

# 3. Dependency Cruiser (Architecture)
echo "ğŸ—ï¸ VÃ©rification architecture..."
npx depcruise src --config .dependency-cruiser.js || {
  echo "âŒ Violation d'architecture dÃ©tectÃ©e. Commit bloquÃ©."
  exit 1
}

echo "âœ… Toutes les vÃ©rifications passÃ©es!"
